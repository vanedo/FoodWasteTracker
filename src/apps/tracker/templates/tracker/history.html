<!DOCTYPE html>
<html>
<head>
    <title>Food History</title>
    <!-- Include Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

</head>
<body>
    {% extends "tracker/base.html" %}
    {% block content %}
    {% load tags %}
    {% load static %}
    <link rel="stylesheet", href="{% static 'css/main.css' %}">
    <div class = "pt-5">
        <div class = "container">
            <div class = "row">
                <div class = "col-md-4">
                    <div class="card mb-4 text-center" style="background-color: rgba(245, 245, 245, 0.4); " >
                        <div class="card-body">
                            <h1 class="card-title"> {% metric_contributions request %} </h1>
                            <p class="card-text">contributions</p>
                        </div>
                    </div>
                </div>
                <div class = "col-md-4">
                    <div class="card mb-4 text-center" style="background-color: rgba(245, 245, 245, 0.4); " >
                        <div class="card-body">
                            <h1 class="card-title">{% metric_items_saved request %} </h1>
                            <p class="card-text">items saved from landfill </p>
                        </div>
                    </div>
                </div>
                <div class = "col-md-4">
                    <div class="card mb-4 text-center" style="background-color: rgba(245, 245, 245, 0.4); " >
                        <div class="card-body">
                            <h1 class="card-title">{% metric_red_emissions request %} kgs</h1>
                            <p class="card-text">CO2 emission savings</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class = "pt-5">
        <div class = "container">
            <div class="mt-4">
                <div class="col-md-6">
                    <div>
                        <canvas id="myChart1"></canvas>
                    </div>    
                        
                        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

                        <script>
                            var ctx = document.getElementById('myChart1');
                            var myChart = new Chart(ctx, {
                                type: 'bar',
                                data: {
                                labels: ['a','b','c','d','e'],
                                datasets: [{    
                                    label: 'Top 5 Upcycled Elements',
                                    data: [1,2,3,4,5],
                                    borderWidth: 2
                                }]
                                },
                                options: {
                                scales: {
                                    y: {
                                    beginAtZero: true
                                    }
                                }
                                }
                            });
                        </script>
                </div>
            </div>
        </div>
    </div>
    
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <h1><font color = "#000000">Find out what other people are doing with their leftovers </h1></font>
            
                <table id = "foodHistory" class="display" style = "background-color: whitesmoke" style="width:100%">
                    
                    <thead>
                        
                        <tr>
                            <th>Food Name</th>
                            <th>Upcycling it</th>
                            <th>Throwing it away</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for key, value in food_counts.items %}
                            <tr>
                                <td>{{ key }}</td>
                                <td>{{ value.upcycled }}</td>
                                <td>{{ value.thrown_away }}</td>
                            </tr>
                        {% empty %}
                            <tr>
                                <td colspan="3">No food history available.</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                
                </table>
            </div>

        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <!-- jquery -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script
    src="http://code.jquery.com/jquery-3.3.1.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css">
    <script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js" ></script>

    <script>
        $(document).ready(function () {
            $('#foodHistory').DataTable();
        });
    </script>

</body>
{% endblock %}
</html>
